(function(e){function t(t){for(var r,a,i=t[0],u=t[1],c=t[2],d=0,f=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(t);while(f.length)f.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,i=1;i<n.length;i++){var u=n[i];0!==o[u]&&(r=!1)}r&&(s.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={app:0},s=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var l=u;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"02ca":function(e,t,n){},"04e6":function(e,t,n){},"05b9":function(e,t,n){var r=n("6374"),o=function(e,t,n){this.username=e,this.password=t,this.results={};var o,s=r(n);try{for(s.s();!(o=s.n()).done;){var a=o.value;this.results[a.alpha3Code]={flagGame:"false",allGame:"false",capitalGame:"false"}}}catch(i){s.e(i)}finally{s.f()}};e.exports=o},"092e":function(e,t,n){},"12e0":function(e,t,n){},"188e":function(e,t,n){},3205:function(e,t,n){},"32c9":function(e,t,n){"use strict";n("7d73")},3715:function(e,t,n){},"3af4":function(e,t,n){"use strict";n("3715")},"3bb2":function(e,t,n){},"4ba3":function(e,t,n){"use strict";n("02ca")},"56d7":function(e,t,n){"use strict";n.r(t),n.d(t,"eventBus",(function(){return At}));n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e.countries?n("router-view",{attrs:{countries:e.countries,currentUser:e.currentUser,randomCountry:e.randomCountry,countriesRemaining:e.countriesRemaining,countriesCorrect:e.countriesCorrect,countryListSelected:e.countryListSelected,result:e.result,loggedIn:e.loggedIn}}):e._e()],1)},s=[],a=(n("99af"),n("7db0"),n("4160"),n("c975"),n("a434"),n("b0c0"),n("d3b7"),n("159b"),n("b85c")),i=n("2909"),u="api/",c={addUser:function(e){return fetch(u+"register",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}))},loginUser:function(e){return fetch(u+"login",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}))},updateUser:function(e,t){return fetch(u+"me/update",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){return e.json()}))},updateUserResults:function(e,t){return fetch(u+"me/update/results",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){return e.json()}))},getUserDetails:function(e){return fetch(u+"me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((function(e){return e.json()}))},refreshToken:function(e){return fetch(u+"me/token",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((function(e){return e.json()}))},logoutUser:function(e,t){return fetch(u+"me/logout",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){return e.json()}))},deleteUser:function(e,t){return fetch(u+"me/delete",{method:"POST",body:JSON.stringify({_id:e}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){return e.json()}))}},l=n("05b9"),d=n.n(l),f=n("f244"),m=n("3d20"),p=n.n(m),g={name:"App",data:function(){return{countries:[],currentUser:null,randomCountry:null,countriesRemaining:[],countriesCorrect:[],countryListSelected:null,result:null,loggedIn:!1}},mounted:function(){var e=this;fetch("https://restcountries.eu/rest/v2/all").then((function(e){return e.json()})).then((function(t){return e.countries=t})).then((function(){return e.removeImpossibleCountries()})).then((function(){localStorage.getItem("jwt")?e.checkToken():(console.log("App mounted guest"),e.generateGuest())})),At.$on("add-user",(function(t){c.addUser(t).then((function(t){return e.currentUser=t})).then((function(){return e.allUsers.push(e.currentUser)})).then((function(){return e.countriesCorrect=[]})).then((function(){return e.countriesRemaining=e.removeImpossibleCountries()})).then((function(){return e.getRandomCountry(e.countriesRemaining)}))})),At.$on("user-loggedin",(function(t){e.currentUser=t,e.countriesCorrect=[],e.countriesRemaining=Object(i["a"])(e.countries),e.setCorrectCountries(),e.getRandomCountry(e.countriesRemaining),e.loggedIn=!0})),At.$on("check-token",(function(){e.checkToken()})),At.$on("logout-requested",(function(){e.logoutUser()})),At.$on("username-updated",(function(t){e.currentUser.username=t})),At.$on("user-reset",(function(t){e.currentUser.results=t,e.countriesCorrect=[],e.countriesRemaining=Object(i["a"])(e.countries),e.getRandomCountry()})),At.$on("user-deleted",(function(){localStorage.clear(),e.generateGuest()})),At.$on("country-correct",(function(t){e.currentUser=t})),At.$on("map-country-selected",(function(t){var n=e.countries.find((function(e){return e.alpha2Code.toLowerCase()===t}));e.countryListSelected=n,"correct"!=e.result&&e.checkAnswer()})),At.$on("change-flag-pressed",(function(t){e.getRandomCountry(e.countriesRemaining)})),At.$on("try-again-pressed",(function(){e.result=null}))},methods:{generateGuest:function(){this.currentUser=new d.a("guest",null,this.countries),this.countriesRemaining=this.countries,this.countriesCorrect=[],this.getRandomCountry(this.countriesRemaining),this.loggedIn=!1},checkToken:function(){var e=this;c.getUserDetails(localStorage.getItem("jwt")).then((function(t){if(200===t.status){var n={_id:t._id,username:t.username,results:t.results};return At.$emit("user-loggedin",n),!0}401===t.status&&(console.log("refreshing token"),c.refreshToken(localStorage.getItem("refreshjwt")).then((function(t){201===t.status?(localStorage.setItem("jwt",t.accessToken),console.log("token refreshed"),e.checkToken()):(console.log("refresh failed"),e.logoutUser())})).catch((function(t){console.log("refresh error"),e.logoutUser()})))})).catch((function(e){return!1}))},refreshToken:function(){console.log("refreshing token"),c.refreshToken(localStorage.getItem("refreshjwt")).then((function(e){return 201===e.status&&(localStorage.setItem("jwt",e.accessToken),console.log("token refreshed"),!0)})).catch((function(e){return!1}))},logoutUser:function(){var e=this;if(this.loggedIn&&localStorage.getItem("jwt")&&localStorage.getItem("refreshjwt")&&this.currentUser){var t={_id:this.currentUser._id,token:localStorage.getItem("refreshjwt")};c.logoutUser(t,localStorage.getItem("jwt")).then((function(t){localStorage.clear(),e.generateGuest(),p.a.fire({icon:"success",title:"Success",text:"Logout successful"}).then((function(){e.$router.push("/")}))})).catch((function(e){return console.log(e)}))}else localStorage.clear(),this.generateGuest()},getRandomCountry:function(e){this.randomCountry=e[Math.floor(Math.random()*e.length)],this.result=null},checkAnswer:function(){if(this.randomCountry.alpha3Code===this.countryListSelected.alpha3Code){this.countriesCorrect=[].concat(Object(i["a"])(this.countriesCorrect),[this.countryListSelected]);var e=this.countriesRemaining.indexOf(this.countryListSelected);this.countriesRemaining.splice(e,1),this.result="correct",this.currentUser.results[this.randomCountry.alpha3Code]["flagGame"]="true",this.loggedIn&&localStorage.getItem("jwt")&&c.updateUserResults(this.currentUser,localStorage.getItem("jwt")).then((function(e){return At.$emit("country-correct",e)})).catch((function(e){console.log(e.status)})),this.countryListSelected=null}else this.result="incorrect"},setCorrectCountries:function(){var e,t=Object(a["a"])(this.countries);try{for(t.s();!(e=t.n()).done;){var n=e.value;if("true"===this.currentUser.results[n.alpha3Code]["flagGame"]){var r=this.countriesRemaining.indexOf(n);r>-1&&this.countriesCorrect.push(this.countriesRemaining.splice(r,1)[0])}}}catch(o){t.e(o)}finally{t.f()}},removeImpossibleCountries:function(){var e=this,t=f["a"].locations,n=[];t.forEach((function(t){e.countries.forEach((function(e){e.alpha2Code.toLowerCase()===t.id&&n.push(e)}))})),this.countries=n},sortByName:function(e){e.sort((function(e,t){var n=e.name.toUpperCase(),r=t.name.toUpperCase();return n<r?-1:n>r?1:void 0}))}},components:{}},h=g,v=(n("678e"),n("2877")),y=Object(v["a"])(h,o,s,!1,null,"228a177e",null),C=y.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{attrs:{id:"learn-container"}},[n("geo-header"),n("div",{attrs:{id:"container"}},[n("learn-map",{attrs:{countries:e.countries}}),e.apiSelectedCountry?n("country-detail",{attrs:{selectedCountry:e.apiSelectedCountry}}):e._e(),e.apiSelectedCountry?e._e():n("section",{attrs:{id:"right-side"}},[n("p",[e._v("Instruction: Click on a country to display some information")])])],1)],1)},b=[],w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{attrs:{id:"left-side"}},[n("p",{staticClass:"tooltip"},[e._v("Currently hovering: "+e._s(e.tooltip))]),n("svg-pan-zoom",{staticStyle:{width:"100%",height:"80%"},attrs:{zoomEnabled:!0,controlIconsEnabled:!0,fit:!1,center:!0,minZoom:1}},[n("radio-svg-map",{attrs:{"location-class":e.getContinent,map:e.World},on:{mouseenter:e.hoverCountry,click:function(t){return e.getCountryDetails()}},model:{value:e.mapSelectedCountry,callback:function(t){e.mapSelectedCountry=t},expression:"mapSelectedCountry"}})],1)],1)},U=[],k=(n("caad"),n("d81d"),n("2532"),n("75de")),S=n("2c0f"),x=n.n(S),j={name:"learn-map",props:["countries"],components:{"radio-svg-map":k["b"],"svg-pan-zoom":x.a},data:function(){return{World:f["a"],mapSelectedCountry:null,apiSelectedCountry:null,tooltip:""}},methods:{getCountryDetails:function(){var e,t=Object(a["a"])(this.countries);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.alpha2Code.toLowerCase()===this.mapSelectedCountry&&(this.apiSelectedCountry=n,At.$emit("learn-country-selected",this.apiSelectedCountry))}}catch(r){t.e(r)}finally{t.f()}},hoverCountry:function(e){var t=e.target.id,n=this.countries.find((function(e){return e.alpha2Code.toLowerCase()===t}));n&&(this.tooltip=n.name)},getContinent:function(e){var t="";if(this.countries.map((function(e){return e.alpha2Code.toLowerCase()})).includes(e.id)){var n=this.countries.find((function(t){return t.alpha2Code.toLowerCase()===e.id}));return t=n.region.toLowerCase(),"americas"===t&&"South America"===n.subregion?"south-america":t}}}},I=j,P=(n("97cc"),Object(v["a"])(I,w,U,!1,null,"4dec0577",null)),$=P.exports,R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{attrs:{id:"right-side"}},[n("img",{attrs:{alt:"flag",src:e.selectedCountry.flag}}),n("p",{attrs:{id:"country-name"}},[n("span",[e._v("Name")]),e._v(": "+e._s(e.selectedCountry.name))]),n("p",[n("span",[e._v("Capital")]),e._v(": "+e._s(e.selectedCountry.capital))]),n("p",[n("span",[e._v("Region")]),e._v(": "+e._s(e.selectedCountry.region))]),n("p",[n("span",[e._v("Sub-Region")]),e._v(": "+e._s(e.selectedCountry.subregion))]),n("label",[e._v("Currency(ies) :")]),n("ul",e._l(e.selectedCountry.currencies,(function(t,r){return t.name?n("li",{key:r},[e._v(" "+e._s(t.name)+" ("+e._s(t.symbol)+")")]):e._e()})),0),n("label",[e._v("Time-Zone(s) :")]),n("ul",e._l(e.selectedCountry.timezones,(function(t,r){return n("li",{key:r},[e._v(e._s(t)+" ")])})),0),n("label",[e._v("Language(s):")]),n("ul",e._l(e.selectedCountry.languages,(function(t,r){return n("li",{key:r},[e._v(e._s(t.name))])})),0),n("p",[n("span",[e._v("Demonym")]),e._v(": "+e._s(e.selectedCountry.demonym))])])},E=[],O={name:"country-detail",props:["selectedCountry","timezones"],data:function(){return{}}},L=O,T=(n("b4f4"),Object(v["a"])(L,R,E,!1,null,"453e615e",null)),A=T.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{attrs:{id:"geo-header"}},[n("geo-nav",{attrs:{currentUser:e.currentUser,loggedIn:e.loggedIn}})],1)},D=[],B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{staticClass:"nav-container"},[n("ul",{staticClass:"links-container"},[n("router-link",{attrs:{to:"/"}},[n("li",{staticClass:"nav-link"},[e._v(" Home ")])]),e.loggedIn?e._e():n("router-link",{attrs:{to:"/login"}},[n("li",{staticClass:"nav-link"},[e._v(" Login ")])]),e.loggedIn?n("router-link",{attrs:{to:"/me"}},[n("li",{staticClass:"nav-link"},[e._v(" My Account ")])]):e._e(),e.loggedIn?e._e():n("router-link",{attrs:{to:"/register"}},[n("li",{staticClass:"nav-link"},[e._v(" Register ")])]),e.loggedIn?n("router-link",{attrs:{to:"/logout"}},[n("li",{staticClass:"nav-link"},[e._v(" Logout ")])]):e._e(),n("router-link",{attrs:{to:"/"}},[n("li",{staticClass:"logo"},[e._v(" GeoQuiz ")])]),n("router-link",{attrs:{to:"/learn"}},[n("li",{staticClass:"nav-link"},[e._v(" Learn ")])]),n("router-link",{attrs:{to:"/play"}},[n("li",{staticClass:"nav-link"},[e._v(" Play ")])]),n("router-link",{attrs:{to:"/instructions"}},[n("li",{staticClass:"nav-link"},[e._v(" Instructions ")])])],1)])},G=[],z={name:"geoNav",props:["currentUser","loggedIn"]},H=z,J=(n("edde"),Object(v["a"])(H,B,G,!1,null,"45384591",null)),M=J.exports,q={name:"geo-header",props:["currentUser","loggedIn"],components:{"geo-nav":M}},F=q,Y=(n("a0a8"),Object(v["a"])(F,N,D,!1,null,"45092f84",null)),Z=Y.exports,W={name:"learnArticle",props:["countries"],data:function(){return{mapSelectedCountry:null,apiSelectedCountry:null}},components:{"learn-map":$,"country-detail":A,"geo-header":Z},mounted:function(){var e=this;At.$on("learn-country-selected",(function(t){e.apiSelectedCountry=t}))}},K=W,Q=(n("32c9"),Object(v["a"])(K,_,b,!1,null,"23a5799e",null)),V=Q.exports,X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{attrs:{id:"main-container"}},[n("div",{attrs:{id:"home-container"}},[n("geo-header",{attrs:{loggedIn:e.loggedIn,currentUser:e.currentUser}}),n("learn-play-buttons"),n("div",{attrs:{id:"world-map"}})],1)])},ee=[],te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"buttons-container"},[n("section",{staticClass:"button-container"},[n("div",[n("router-link",{attrs:{to:"/learn"}},[n("p",[n("span",{staticClass:"bg"}),n("span",{staticClass:"base"}),n("span",{staticClass:"text"},[e._v("Learn")])])])],1)]),n("section",{staticClass:"button-container"},[n("div",[n("router-link",{attrs:{to:"/play"}},[n("p",[n("span",{staticClass:"bg"}),n("span",{staticClass:"base"}),n("span",{staticClass:"text"},[e._v("Play")])])])],1)])])},ne=[],re={name:"learnPlayButtons"},oe=re,se=(n("91bd"),Object(v["a"])(oe,te,ne,!1,null,"eee62e6c",null)),ae=se.exports,ie={name:"home",components:{"geo-header":Z,"learn-play-buttons":ae},props:["currentUser","loggedIn"],methods:{}},ue=ie,ce=(n("be94"),Object(v["a"])(ue,X,ee,!1,null,"2c59821e",null)),le=ce.exports,de=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{attrs:{id:"play-container"}},[n("geo-header",{attrs:{loggedIn:e.loggedIn,currentUser:e.currentUser}}),n("div",{attrs:{id:"user-instructions-container"}},[e.loggedIn?n("div",{attrs:{id:"current-user"}},[n("p",[e._v("Player: "+e._s(e.currentUser.username))]),n("button",{attrs:{id:"change-user-button"},on:{click:function(e){e.preventDefault()}}},[e._v("Change player")])]):e._e(),e.loggedIn?e._e():n("div",{attrs:{id:"guest"}},[n("p",[e._v("Login to save your score")])])]),n("div",{attrs:{id:"game-area"}},[e.currentUser?n("map-header",{attrs:{randomCountry:e.randomCountry,countriesRemaining:e.countriesRemaining,correctAnswers:e.countriesCorrect,result:e.result}}):e._e(),e.currentUser?n("play-map",{attrs:{currentUser:e.currentUser,countries:e.countries,correctCountry:e.randomCountry,correctAnswers:e.countriesCorrect,countriesRemaining:e.countriesRemaining,randomCountry:e.randomCountry,result:e.result}}):e._e()],1),e.currentUser?n("list-countries",{attrs:{countriesCorrect:e.countriesCorrect}}):e._e()],1)},fe=[],me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{ref:"map",attrs:{id:"map-section"}},[n("p",{staticClass:"tooltip"},[e._v("Currently hovering: "+e._s(e.tooltip))]),"correct"===e.result?n("div",{staticClass:"player-guess-feedback"},["correct"===e.result?n("p",[e._v("Great job!!")]):e._e(),n("button",{attrs:{id:"next-flag"},on:{click:function(t){t.preventDefault(),e.getRandomCountry(),e.scrollTop()}}},[e._v("Next Flag")]),n("button",{attrs:{id:"details-answers"},on:{click:function(t){return e.scrollBottom()}}},[e._v("Check your answers")])]):e._e(),"incorrect"===e.result?n("div",{staticClass:"player-guess-feedback"},[n("p",[e._v("Incorrect... Try again.")]),n("button",{attrs:{id:"try-again"},on:{click:function(t){return t.preventDefault(),e.tryAgain()}}},[e._v("Try Again")]),n("button",{attrs:{id:"get-hint"},on:{click:function(t){return t.preventDefault(),e.getHint()}}},[e._v("Hint?")])]):e._e(),n("svg-pan-zoom",{staticStyle:{width:"100%",height:"90%"},attrs:{zoomEnabled:!0,controlIconsEnabled:!0,fit:!1,center:!0,minZoom:1}},[n("checkbox-svg-map",{attrs:{"location-class":e.isCorrect,map:e.world},on:{click:e.selectCountry,mouseenter:e.hoverCountry}})],1)],1)},pe=[],ge={name:"play-map",props:["countries","correctAnswers","countriesRemaining","currentUser","randomCountry","result"],components:{"checkbox-svg-map":k["a"],"svg-pan-zoom":x.a},data:function(){return{selectedCountries:[],world:f["a"],tooltip:""}},computed:{apiSelectedCountries:function(){var e=this;return this.selectedCountries.map((function(t){return e.countries.find((function(e){return e.alpha2Code.toLowerCase()===t.toLowerCase()}))}))}},methods:{isCorrect:function(e){var t="";if(this.correctAnswers.map((function(e){return e.alpha2Code.toLowerCase()})).includes(e.id)){var n=this.correctAnswers.find((function(t){return t.alpha2Code.toLowerCase()===e.id}));return t=n.region.toLowerCase(),"americas"===t&&"South America"===n.subregion?"correct-south-america":"correct-"+t}},selectCountry:function(e){var t=e.target.id;At.$emit("map-country-selected",t)},hoverCountry:function(e){var t=e.target.id,n=this.countries.find((function(e){return e.alpha2Code.toLowerCase()===t}));n&&(this.tooltip=n.name)},getRandomCountry:function(){At.$emit("change-flag-pressed")},scrollTop:function(){},scrollBottom:function(){window.scrollTo({top:1e3,left:100,behavior:"smooth"})},tryAgain:function(){At.$emit("try-again-pressed")},getHint:function(){At.$emit("get-hint-pressed")}}},he=ge,ve=(n("81d0"),Object(v["a"])(he,me,pe,!1,null,"57bdaec2",null)),ye=ve.exports,Ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",[n("h2",[e._v("Correct countries:")]),n("ul",e._l(e.countriesCorrect,(function(t,r){return n("li",{key:r,attrs:{id:"countries"}},[n("ul",{staticClass:"mini-country"},[n("li",{staticClass:"mini-flag"},[n("img",{attrs:{src:t.flag,alt:t.name}})]),n("div",{staticClass:"details-country"},[n("li",{staticClass:"mini-name"},[n("b",[e._v(e._s(t.name))])]),n("li",{staticClass:"mini-capital"},[e._v("Capital: "+e._s(t.capital))])])])])})),0)])},_e=[],be={name:"list-countries",props:["countriesCorrect"]},we=be,Ue=(n("eb74"),Object(v["a"])(we,Ce,_e,!1,null,"0de80232",null)),ke=Ue.exports,Se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"map-header"}},[n("div",{attrs:{id:"change-flag-button"}},[e.randomCountry?n("button",{on:{click:function(t){return t.preventDefault(),e.getRandomCountry(e.countriesRemaining)}}},[e._v("Change Flag")]):e._e()]),e.randomCountry?n("flag-to-guess",{attrs:{randomCountry:e.randomCountry}}):e._e(),n("section",{attrs:{id:"hints-container"}},[n("div",{attrs:{id:"hints-header-container"}},[n("h2",{attrs:{id:"hints-header"}},[e._v("Hints")]),n("button",{attrs:{id:"hint-button"},on:{click:function(t){return t.preventDefault(),e.getHint()}}},[e._v("Get Hint")])]),e.hints>0?n("p",{staticClass:"hint"},[e._v(" 1. Its capital is: "+e._s(e.randomCountry.capital))]):e._e(),e.hints>1?n("p",{staticClass:"hint"},[e._v(" 2. It is found in: "+e._s(e.randomCountry.region))]):e._e(),e.hints>2?n("p",{staticClass:"hint"},[e._v(" 3. The country is: "+e._s(e.randomCountry.name))]):e._e(),e.hints>3?n("p",{staticClass:"hint red-text"},[e._v("No more hints available. Use next flag button to skip.")]):e._e()]),n("div",{attrs:{id:"counters"}},[n("div",{attrs:{id:"counters-container"}},[n("div",{attrs:{id:"counter-correct"}},[n("p",{staticClass:"text-correct-answers"},[e._v("Correct answers: ")]),n("p",{staticClass:"num-correct-answers"},[e._v(e._s(e.correctAnswers.length))])]),n("div",{attrs:{id:"counter-remaining"}},[n("p",{staticClass:"text-remaining"},[e._v("Countries Remaining: ")]),n("p",{staticClass:"num-remaining"},[e._v(e._s(e.countriesRemaining.length))])])])])],1)},xe=[],je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.randomCountry?n("img",{attrs:{src:e.randomCountry.flag,alt:e.randomCountry.name+"flag"}}):e._e()},Ie=[],Pe={name:"flag-to-guess",props:["randomCountry"],data:function(){return{}}},$e=Pe,Re=(n("6696"),Object(v["a"])($e,je,Ie,!1,null,"5a4a82ac",null)),Ee=Re.exports,Oe={name:"map-header",props:["randomCountry","countriesRemaining","correctAnswers","result"],data:function(){return{hints:0}},mounted:function(){var e=this;At.$on("get-hint-pressed",(function(){e.hints+=1})),At.$on("change-flag-pressed",(function(){e.hints=0})),At.$on("country-correct",(function(){e.hints=0}))},methods:{getRandomCountry:function(e){At.$emit("change-flag-pressed",e)},getHint:function(){this.hints+=1}},components:{"flag-to-guess":Ee}},Le=Oe,Te=(n("c31f"),Object(v["a"])(Le,Se,xe,!1,null,"1c00d670",null)),Ae=Te.exports,Ne={name:"playArticle",props:["countries","currentUser","randomCountry","countriesRemaining","countriesCorrect","countryListSelected","result","loggedIn"],components:{"play-map":ye,"list-countries":ke,"map-header":Ae,"geo-header":Z}},De=Ne,Be=(n("e382"),Object(v["a"])(De,de,fe,!1,null,"30355b04",null)),Ge=Be.exports,ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{attrs:{id:"instructions-container"}},[n("geo-header"),n("section",{attrs:{id:"instructions"}},[e._m(0),n("p",[e._v("You’ll see a flag in the top left of your screen.")]),e._m(1),n("p",[e._v("Keep going until you paint the whole globe!")]),n("router-link",{attrs:{to:"/play"}},[n("button",{attrs:{id:"back"}},[e._v("Back to the game")])])],1)],1)},He=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[n("b",[e._v("How to play:")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[e._v("Click a country on the map to make your guess")]),n("li",[e._v("Correct answers will get coloured in!")]),n("li",[e._v("Click 'next flag' to continue playing")]),n("li",[e._v("If you get stuck use the hints")]),n("li",[e._v("You can zoom in on the map to find small countries")])])}],Je={name:"instructions",props:["currentUser","loggedIn"],components:{"geo-header":Z}},Me=Je,qe=(n("b66d"),Object(v["a"])(Me,ze,He,!1,null,"7fad7e6a",null)),Fe=qe.exports,Ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{attrs:{id:"register-container"}},[n("geo-header"),n("register-user-form",{attrs:{countries:e.countries,currentUser:e.currentUser,loggedIn:e.loggedIn}})],1)},Ze=[],We=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("h3",[e._v("Register new account:")]),n("form",{attrs:{id:"register-form"},on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[n("label",{attrs:{id:"label-username",for:"username"}},[e._v("Username: ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.userName,expression:"userName"}],attrs:{name:"username",id:"username",type:"text",placeholder:"Enter username",required:""},domProps:{value:e.userName},on:{input:function(t){t.target.composing||(e.userName=t.target.value)}}}),n("label",{attrs:{for:"password"}},[e._v("Password: ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{name:"password",id:"password",type:"password",placeholder:"Password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),n("input",{attrs:{type:"submit",name:"submit",value:"Register",id:"register-button"}})]),n("p",[e._v("Already have an account? "),n("router-link",{attrs:{to:"/login"}},[e._v("Login here")])],1)])},Ke=[],Qe={name:"register-user-form",props:["countries"],data:function(){return{userName:"",password:"",currentUser:null,status:null}},methods:{handleSubmit:function(){var e=this;this.createUser(),c.addUser(this.currentUser).then((function(t){201===t.status?p.a.fire({icon:"success",title:"Success",text:"Registration successful"}).then((function(t){e.clearForm()})):409===t.status&&p.a.fire({icon:"error",title:"Error",text:"Registration failed. Username is already in use. Please pick another username"})})).catch((function(e){p.a.fire({icon:"error",title:"Error",text:"Internal server error"})}))},createUser:function(){var e=new d.a(this.userName,this.password,this.countries);this.currentUser=e},clearForm:function(){this.userName="",this.password="",this.$router.push("/login")}}},Ve=Qe,Xe=(n("fe22"),Object(v["a"])(Ve,We,Ke,!1,null,"28899b7d",null)),et=Xe.exports,tt={name:"registerArticle",props:["countries","currentUser","loggedIn"],components:{"geo-header":Z,"register-user-form":et}},nt=tt,rt=(n("b08f"),Object(v["a"])(nt,Ye,Ze,!1,null,"3ecada55",null)),ot=rt.exports,st=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{attrs:{id:"login-container"}},[n("geo-header",{attrs:{loggedIn:e.loggedIn,currentUser:e.currentUser}}),n("login-user-form")],1)},at=[],it=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("h3",[e._v("Login:")]),n("form",{attrs:{id:"login-form"},on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[n("label",{attrs:{id:"label-username",for:"username"}},[e._v("Username: ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.login.username,expression:"login.username"}],attrs:{name:"username",id:"username",type:"text",placeholder:"Enter username",required:""},domProps:{value:e.login.username},on:{input:function(t){t.target.composing||e.$set(e.login,"username",t.target.value)}}}),n("label",{attrs:{for:"password"}},[e._v("Password: ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.login.password,expression:"login.password"}],attrs:{name:"password",id:"password",type:"password",placeholder:"Password",required:""},domProps:{value:e.login.password},on:{input:function(t){t.target.composing||e.$set(e.login,"password",t.target.value)}}}),n("input",{attrs:{type:"submit",name:"submit",value:"Login",id:"login-button"}})]),n("p",[e._v("Don't have an account? "),n("router-link",{attrs:{to:"/register"}},[e._v("Register here")])],1)])},ut=[],ct={name:"login-user-form",data:function(){return{login:{username:"",password:""}}},methods:{handleSubmit:function(){var e=this;c.loginUser(this.login).then((function(t){202===t.status?(localStorage.setItem("jwt",t.accessToken),localStorage.setItem("refreshjwt",t.refreshToken),At.$emit("user-loggedin",t.user),p.a.fire({icon:"success",title:"Success",text:"Login successful"}).then((function(t){e.clearForm()}))):401===t.status&&p.a.fire({icon:"error",title:"Error",text:"Login failed. Please check your username and password are correct."})})).catch((function(e){p.a.fire({icon:"error",title:"Error",text:"Internal server error"})}))},clearForm:function(){this.username="",this.password="",this.$router.push("/")}}},lt=ct,dt=(n("f9a9"),Object(v["a"])(lt,it,ut,!1,null,"c12cf830",null)),ft=dt.exports,mt={name:"loginArticle",props:["currentUser","loggedIn"],components:{"geo-header":Z,"login-user-form":ft}},pt=mt,gt=(n("ddeb"),Object(v["a"])(pt,st,at,!1,null,"8f7b40f2",null)),ht=gt.exports,vt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{attrs:{id:"logout-container"}},[n("geo-header",{attrs:{currentUser:e.currentUser,loggedIn:e.loggedIn}}),n("p",[e._v("Current User: "+e._s(e.currentUser.username))]),n("button",{on:{click:function(t){return t.preventDefault(),e.handleLogout(t)}}},[e._v("Logout")])],1)},yt=[],Ct={name:"logoutArticle",props:["currentUser","loggedIn"],components:{"geo-header":Z},methods:{handleLogout:function(){At.$emit("logout-requested")}}},_t=Ct,bt=(n("4ba3"),Object(v["a"])(_t,vt,yt,!1,null,"6ff57a67",null)),wt=bt.exports,Ut=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{attrs:{id:"me-container"}},[n("geo-header",{attrs:{loggedIn:e.loggedIn,currentUser:e.currentUser}}),n("me-details",{attrs:{currentUser:e.currentUser,score:e.countriesCorrect.length}})],1)},kt=[],St=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.currentUser?n("section",{attrs:{id:"account-details-container"}},[n("h3",[e._v("Account Details:")]),e.usernameEdit?e._e():n("p",{attrs:{id:"username"}},[e._v("Username: "+e._s(e.currentUser.username))]),e.usernameEdit?n("form",[n("label",{attrs:{for:"username"}},[e._v("Username: ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:e.username},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),n("input",{staticClass:"submit-button",attrs:{type:"submit",value:"Update"},on:{click:function(t){return t.preventDefault(),e.handleEditUsername(t)}}})]):e._e(),e.passwordEdit?n("form",[n("label",{attrs:{for:"oldPassword"}},[e._v("Current Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.oldPassword,expression:"oldPassword"}],attrs:{name:"oldPassword",type:"password"},domProps:{value:e.oldPassword},on:{input:function(t){t.target.composing||(e.oldPassword=t.target.value)}}}),n("label",{attrs:{for:"newPassword"}},[e._v("New Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newPassword,expression:"newPassword"}],attrs:{name:"newPassword",type:"password"},domProps:{value:e.newPassword},on:{input:function(t){t.target.composing||(e.newPassword=t.target.value)}}}),n("label",{attrs:{for:"newPassword2"}},[e._v("Retype Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newPassword2,expression:"newPassword2"}],attrs:{type:"password",name:"newPassword2"},domProps:{value:e.newPassword2},on:{input:function(t){t.target.composing||(e.newPassword2=t.target.value)}}}),n("input",{staticClass:"submit-button",attrs:{type:"submit",value:"Update"},on:{click:function(t){return t.preventDefault(),e.handleEditPassword(t)}}})]):e._e(),n("p",{attrs:{id:"score"}},[e._v("Score: "+e._s(e.score)+" out of 248")]),n("button",{attrs:{id:"button-username"},on:{click:function(t){return t.preventDefault(),e.handleUsername(t)}}},[e._v("Change Username")]),n("button",{attrs:{id:"button-password"},on:{click:function(t){return t.preventDefault(),e.handlePassword(t)}}},[e._v("Change Password")]),n("button",{attrs:{id:"button-reset"},on:{click:function(t){return t.preventDefault(),e.handleResetClicked(t)}}},[e._v("Reset Game Results")]),n("button",{attrs:{id:"button-delete"},on:{click:function(t){return t.preventDefault(),e.handleDelete(t)}}},[e._v("Delete Account")])]):e._e()},xt=[],jt={name:"meDetails",props:["currentUser","score"],data:function(){return{username:"",oldPassword:"",newPassword:"",newPassword2:"",usernameEdit:!1,passwordEdit:!1}},mounted:function(){this.currentUser&&(this.username=this.currentUser.username)},methods:{handleUsername:function(){this.usernameEdit=!0},handlePassword:function(){this.passwordEdit=!0},handleEditUsername:function(){var e=this,t={username:this.username,password:"",results:this.currentUser.results,_id:this.currentUser._id};c.updateUser(t,localStorage.getItem("jwt")).then((function(t){200===t.status?(e.username=t.username,At.$emit("username-updated",e.username),e.usernameEdit=!1,p.a.fire({icon:"success",title:"Success",text:"Username Updated Successfully"})):409===t.status?p.a.fire({icon:"error",title:"Error",text:"Username already taken"}):console.log("Update failed. Bad request")})).catch((function(e){console.log("Update failed. Server error."),console.log(e)}))},handleResetClicked:function(){var e=this;p.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, reset my scores!"}).then((function(t){t.isConfirmed&&(e.handleReset(),p.a.fire("Scores reset!","Your scores have been reset.","success"))}))},handleReset:function(){var e={};for(var t in this.currentUser.results)e[t]={flagGame:"false",allGame:"false",capitalGame:"false"};var n={username:this.currentUser.username,_id:this.currentUser._id,results:e};c.updateUserResults(n,localStorage.getItem("jwt")).then((function(e){200===e.status?(At.$emit("user-reset",e.results),p.a.fire({icon:"success",title:"Success",text:"Results successfully reset"})):p.a.fire({icon:"error",title:"error",text:"Reset failed"})})).catch((function(e){p.a.fire({icon:"error",title:"error",text:"Server error"})}))},handleDelete:function(){var e=this;p.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete account!"}).then((function(t){t.isConfirmed&&c.deleteUser(e.currentUser._id,localStorage.getItem("jwt")).then((function(t){200===t.status&&p.a.fire({icon:"success",title:"Success",text:"User successfully deleted"}).then((function(){At.$emit("user-deleted"),e.$router.push("/")}))})).catch((function(e){p.a.fire({icon:"error",title:"Error",text:"Server error. Failed to delete account"}),console.log(e)}))}))},handleEditPassword:function(){}}},It=jt,Pt=(n("e882"),Object(v["a"])(It,St,xt,!1,null,"08a97774",null)),$t=Pt.exports,Rt={name:"meArticle",props:["currentUser","loggedIn","countriesCorrect"],components:{"geo-header":Z,"me-details":$t}},Et=Rt,Ot=(n("3af4"),Object(v["a"])(Et,Ut,kt,!1,null,"317ac158",null)),Lt=Ot.exports,Tt=n("8c4f");r["a"].use(Tt["a"]),r["a"].config.productionTip=!1;var At=new r["a"],Nt=new Tt["a"]({mode:"history",routes:[{path:"/",name:"Home",component:le,props:!0},{path:"/learn",name:"Learn",component:V,props:!0},{path:"/play",name:"Play",component:Ge,props:!0},{path:"/instructions",name:"Instructions",component:Fe},{path:"/register",name:"Register",component:ot},{path:"/login",name:"Login",component:ht},{path:"/logout",name:"Logout",component:wt},{path:"/me",name:"Me",component:Lt,props:!0}]});new r["a"]({router:Nt,render:function(e){return e(C)}}).$mount("#app")},"603c":function(e,t,n){},"60b6":function(e,t,n){},6696:function(e,t,n){"use strict";n("9efc")},"678e":function(e,t,n){"use strict";n("60b6")},"6a4a":function(e,t,n){},7329:function(e,t,n){},"7d73":function(e,t,n){},"81d0":function(e,t,n){"use strict";n("188e")},"86f2":function(e,t,n){},"876f":function(e,t,n){},"91bd":function(e,t,n){"use strict";n("092e")},"97cc":function(e,t,n){"use strict";n("b879")},"9efc":function(e,t,n){},a0a8:function(e,t,n){"use strict";n("d79f")},afad:function(e,t,n){},b08f:function(e,t,n){"use strict";n("876f")},b1fc:function(e,t,n){},b4f4:function(e,t,n){"use strict";n("603c")},b66d:function(e,t,n){"use strict";n("afad")},b879:function(e,t,n){},be94:function(e,t,n){"use strict";n("d076")},c31f:function(e,t,n){"use strict";n("04e6")},d076:function(e,t,n){},d79f:function(e,t,n){},ddeb:function(e,t,n){"use strict";n("6a4a")},e382:function(e,t,n){"use strict";n("12e0")},e882:function(e,t,n){"use strict";n("7329")},eb74:function(e,t,n){"use strict";n("3bb2")},edde:function(e,t,n){"use strict";n("86f2")},f9a9:function(e,t,n){"use strict";n("3205")},fe22:function(e,t,n){"use strict";n("b1fc")}});
//# sourceMappingURL=app.6248b369.js.map